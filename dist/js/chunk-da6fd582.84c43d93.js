(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da6fd582"],{"0078":function(t,e,a){"use strict";var s="http://localhost:1010/uploads/logo/",i="http://localhost:1010/uploads/image/";e["a"]={photoCompanyLogobaseURL:s,photoDealbaseURL:i}},"28d6":function(t,e,a){"use strict";a("dd7f")},4299:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-list-container",attrs:{id:"data-list-thumb-view"}},[a("companies-sidebar",{attrs:{isSidebarActive:t.addNewDataSidebar,data:t.sidebarData},on:{closeSidebar:t.toggleDataSidebar}}),a("vs-table",{ref:"table",attrs:{pagination:"","max-items":t.itemsPerPage,search:"",data:t.companies},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return[a("tbody",t._l(s,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},[a("vs-td",{staticClass:"img-container"},[a("img",{staticClass:"product-img",attrs:{src:t.logo+e.logo}})]),a("vs-td",[a("vs-chip",{staticClass:"product-name font-medium truncate",attrs:{color:"warning"}},[t._v(t._s(e.companyName))])],1),a("vs-td",[a("p",{staticClass:"product-name font-medium truncate"},[t._v(t._s(e.location.street))])]),a("vs-td",[a("p",{staticClass:"product-name font-medium truncate"},[t._v(t._s(e.location.city))])]),a("vs-td",[a("p",{staticClass:"product-name font-medium truncate"},[t._v(t._s(e.location.state))])]),a("vs-td",[a("p",{staticClass:"product-name font-medium truncate"},[t._v(t._s(e.location.zipcode))])]),a("vs-td",[a("vs-chip",{staticClass:"product-name font-medium truncate",attrs:{color:"success"}},[t._v(t._s(e.category.name))])],1),a("vs-td",{staticClass:"whitespace-no-wrap"},[a("feather-icon",{attrs:{icon:"EditIcon",svgClasses:"w-5 h-5 hover:text-primary stroke-current"},on:{click:function(a){return a.stopPropagation(),t.editData(e)}}}),a("feather-icon",{staticClass:"ml-2",attrs:{icon:"TrashIcon",svgClasses:"w-5 h-5 hover:text-danger stroke-current"},on:{click:function(a){return a.stopPropagation(),t.deleteData(e)}}})],1)],1)})),1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"flex flex-wrap-reverse items-center data-list-btn-container"},[a("div",{staticClass:"btn-add-new p-3 mb-4 mr-4 rounded-lg cursor-pointer flex items-center justify-center text-lg font-medium text-base text-primary border border-solid border-primary",on:{click:t.addNewData}},[a("feather-icon",{attrs:{icon:"PlusIcon",svgClasses:"h-4 w-4"}}),a("span",{staticClass:"ml-2 text-base text-primary"},[t._v("Add New")])],1)]),a("vs-dropdown",{staticClass:"cursor-pointer mb-4 mr-4 items-per-page-handler",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.itemsPerPage-(t.itemsPerPage-1))+" - "+t._s(t.companies.length-t.currentPage*t.itemsPerPage>0?t.currentPage*t.itemsPerPage:t.companies.length)+" of "+t._s(t.queriedItems))]),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=4}}},[a("span",[t._v("4")])]),a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=10}}},[a("span",[t._v("10")])]),a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=15}}},[a("span",[t._v("15")])]),a("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=20}}},[a("span",[t._v("20")])])],1)],1)],1),a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"name"}},[t._v("Logo")]),a("vs-th",{attrs:{"sort-key":"name"}},[t._v("Company Name")]),a("vs-th",{attrs:{"sort-key":"name"}},[t._v("Street")]),a("vs-th",{attrs:{"sort-key":"name"}},[t._v("City")]),a("vs-th",{attrs:{"sort-key":"name"}},[t._v("State")]),a("vs-th",{attrs:{"sort-key":"name"}},[t._v("Zipcode")]),a("vs-th",{attrs:{"sort-key":"name"}},[t._v("Category")]),a("vs-th",[t._v("Action")])],1)],2)],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-sidebar",{staticClass:"add-new-data-sidebar items-no-padding",attrs:{"click-not-close":"","position-right":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:t.isSidebarActiveLocal,callback:function(e){t.isSidebarActiveLocal=e},expression:"isSidebarActiveLocal"}},[a("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[a("h4",[t._v(t._s(0===Object.entries(this.data).length?"ADD NEW":"UPDATE")+" ITEM")]),a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(e){e.stopPropagation(),t.isSidebarActiveLocal=!1}}})],1),a("vs-divider",{staticClass:"mb-0"}),a(t.scrollbarTag,{key:t.$vs.rtl,tag:"component",staticClass:"scroll-area--data-list-add-new",attrs:{settings:t.settings}},[a("div",{staticClass:"p-6"},[null!=t.$data._id?[a("div",{staticClass:"img-container w-64 mx-auto flex items-center justify-center"},[t.isNew?t._e():a("img",{staticClass:"responsive",attrs:{src:t.imageURL+t.logo,alt:"img"}}),t.isNew?a("img",{staticClass:"responsive",attrs:{src:t.logo,alt:"img"}}):t._e()]),a("div",{staticClass:"modify-img flex justify-between mt-5"},[a("input",{ref:"updateImgInput",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.updateCurrImg}}),a("vs-button",{staticClass:"mr-4",attrs:{type:"flat"},on:{click:function(e){return t.$refs.updateImgInput.click()}}},[t._v("Update Image")]),a("vs-button",{attrs:{type:"flat",color:"#999"},on:{click:function(e){t.logo="no-photo.jpg"}}},[t._v("Remove Image")])],1)]:t._e(),a("v-select",{attrs:{options:t.categories,reduce:function(t){return t._id},label:"name",dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}),a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:50",expression:"'required|max:50'"}],staticClass:"mt-5 w-full",attrs:{label:"Company Name",name:"companyName"},model:{value:t.companyName,callback:function(e){t.companyName=e},expression:"companyName"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("companyName"),expression:"errors.has('companyName')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("companyName")))]),a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:50",expression:"'required|max:50'"}],staticClass:"mt-5 w-full",attrs:{label:"Coordinates(EX : 38.1223,37.54545)",name:"coordinates"},model:{value:t.location.coordinates,callback:function(e){t.$set(t.location,"coordinates",e)},expression:"location.coordinates"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("coordinates"),expression:"errors.has('coordinates')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("coordinates")))]),a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:50",expression:"'required|max:50'"}],staticClass:"mt-5 w-full",attrs:{label:"Street",name:"street"},model:{value:t.location.street,callback:function(e){t.$set(t.location,"street",e)},expression:"location.street"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("street"),expression:"errors.has('street')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("street")))]),a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:50",expression:"'required|max:50'"}],staticClass:"mt-5 w-full",attrs:{label:"City",name:"city"},model:{value:t.location.city,callback:function(e){t.$set(t.location,"city",e)},expression:"location.city"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("city"),expression:"errors.has('city')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("city")))]),a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:50",expression:"'required|max:50'"}],staticClass:"mt-5 w-full",attrs:{label:"State",name:"state"},model:{value:t.location.state,callback:function(e){t.$set(t.location,"state",e)},expression:"location.state"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("state"),expression:"errors.has('state')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("state")))]),a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:{regex:"^([0-9]+)$"},expression:"{regex: '^([0-9]+)$' }"}],staticClass:"mt-5 w-full",attrs:{label:"Zipcode",name:"zipcode"},model:{value:t.location.zipcode,callback:function(e){t.$set(t.location,"zipcode",e)},expression:"location.zipcode"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("zipcode"),expression:"errors.has('zipcode')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("zipcode")))]),a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:50",expression:"'required|max:50'"}],staticClass:"mt-5 w-full",attrs:{label:"Country",disabled:!0,name:"country"},model:{value:t.location.country,callback:function(e){t.$set(t.location,"country",e)},expression:"location.country"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("country"),expression:"errors.has('country')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("country")))])],2)]),a("div",{staticClass:"flex flex-wrap items-center p-6",attrs:{slot:"footer"},slot:"footer"},[a("vs-button",{staticClass:"mr-6",attrs:{disabled:!t.isFormValid},on:{click:t.submitData}},[t._v("Submit")]),a("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(e){t.isSidebarActiveLocal=!1}}},[t._v("Cancel")])],1)],1)},r=[],n=(a("96cf"),a("1da1")),c=(a("28a5"),a("7f7f"),a("ac6a"),a("ffc1"),a("9d63")),l=a.n(c),d=a("4a7a"),u=a.n(d),m=a("0078"),p={props:{isSidebarActive:{type:Boolean,required:!0},data:{type:Object,default:function(){}}},components:{VuePerfectScrollbar:l.a,"v-select":u.a},data:function(){return{_id:null,location:{type:"Point",coordinates:null,street:null,city:null,state:null,zipcode:null,country:"USA"},logo:null,companyName:null,category:null,settings:{maxScrollbarLength:60,wheelSpeed:.6},imageURL:m["a"].photoCompanyLogobaseURL,isNew:!1}},watch:{isSidebarActive:function(t){if(t||(this.isNew=!1),t)if(0===Object.entries(this.data).length)this.initValues(),this.$validator.reset();else{var e=JSON.parse(JSON.stringify(this.data)),a=e._id,s=e.location,i=e.logo,o=e.companyName,r=(e.name,e.surname,e.phone,e.email,e.category);this._id=a,this.location={coordinates:s.coordinates[0]+","+s.coordinates[1],street:s.street,city:s.city,state:s.state,zipcode:s.zipcode,country:s.country},this.logo=i,this.companyName=o,this.category=r}}},computed:{isSidebarActiveLocal:{get:function(){return this.isSidebarActive},set:function(t){t||this.$emit("closeSidebar")}},isFormValid:function(){return!this.errors.any()&&this.location.coordinates&&this.location.street&&this.location.city&&this.location.state&&this.location.zipcode&&this.location.country&&this.companyName&&this.category},scrollbarTag:function(){return this.$store.getters.scrollbarTag},categories:function(){return this.$store.state.categories.allCategories}},methods:{initValues:function(){this._id=null,this.categoryName=null,this.location.coordinates=null,this.location.street=null,this.location.city=null,this.location.state=null,this.location.zipcode=null,this.location.country="USA",this.companyName=null,this.category=null,this.logo="no-photo.jpg"},submitData:function(){var t=this;this.$validator.validateAll().then((function(e){if(e){var a=t.location.coordinates.split(","),s={_id:t._id,location:{type:"Point",coordinates:[a[0],a[1]],street:t.location.street,city:t.location.city,state:t.location.state,zipcode:t.location.zipcode,country:t.location.country},logo:"no-photo.jpg",companyName:t.companyName,category:t.category};null!==t._id?t.$store.dispatch("updateCompany",s).catch((function(t){console.error(t)})):(delete s._id,t.$store.dispatch("addCompany",s).catch((function(t){console.error(t)}))),t.$emit("closeSidebar"),t.initValues()}}))},updateCurrImg:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s,i,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.target.files||!e.target.files[0]){t.next=10;break}return a=new FileReader,a.onload=function(t){o.logo=t.target.result},a.readAsDataURL(e.target.files[0]),s=new FormData,s.append("file",e.target.files[0]),i={_id:this._id,data:s},t.next=9,this.$store.dispatch("uploadCompanyImage",i);case 9:this.isNew=!0;case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){this.$store.dispatch("getAllCategories")}},v=p,h=(a("53cb"),a("2877")),f=Object(h["a"])(v,o,r,!1,null,"5a8be81d",null),g=f.exports,y={components:{CompaniesSidebar:g},data:function(){return{selected:[],itemsPerPage:10,isMounted:!1,addNewDataSidebar:!1,sidebarData:{},logo:m["a"].photoCompanyLogobaseURL}},computed:{currentPage:function(){return this.isMounted?this.$refs.table.currentx:0},companies:function(){return this.$store.state.companies.allCompanies},queriedItems:function(){return this.$refs.table?this.$refs.table.queriedResults.length:this.companies.length}},methods:{addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},deleteData:function(t){this.$store.dispatch("deleteCompany",t._id).catch((function(t){console.error(t)}))},editData:function(t){this.sidebarData=t,this.toggleDataSidebar(!0)},toggleDataSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=t}},created:function(){this.$store.dispatch("getAllCompanies")},mounted:function(){this.isMounted=!0}},b=y,w=(a("28d6"),Object(h["a"])(b,s,i,!1,null,null,null));e["default"]=w.exports},"53cb":function(t,e,a){"use strict";a("7fc1")},"7fc1":function(t,e,a){},dd7f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-da6fd582.84c43d93.js.map